<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <input type="text" id="number" />
    <button onclick="transfer()">点击加工数字</button>
    <br />
    <p id="afterTrans"></p>
    <script>
      function transfer() {
        let inputNumber = document.getElementById('number').value
        console.log('inputNumber = ' + inputNumber)

        // inputNumber分割成整数部分和小数部分
        let numArray = inputNumber.toString().split('.')

        // 提取整数部分
        let pureNum = () => {
          let integerPart = numArray[0]
          // 如果是负数，去掉负号
          if (inputNumber < 0) {
            integerPart = integerPart.substring(1)
          }
          return integerPart
        }

        // 格式化整数部分，插入逗号
        let add = (integerPart) => {
          let result = ''
          let count = 0

          for (let i = integerPart.length - 1; i >= 0; i--) {
            result = integerPart[i] + result
            count++
            if (count === 3 && i !== 0) {
              result = ',' + result
              count = 0
            }
          }
          return result
        }

        let formattedInteger = add(pureNum())

        // 小数部分
        let formattedNumber = formattedInteger
        if (numArray.length > 1) {
          formattedNumber += '.' + numArray[1]
        }

        // 加上负号
        if (inputNumber < 0) {
          formattedNumber = '-' + formattedNumber
        }

        // console.log(formattedNumber)
        document.getElementById('afterTrans').innerHTML = formattedNumber
      }
    </script>
  </body>
</html>
